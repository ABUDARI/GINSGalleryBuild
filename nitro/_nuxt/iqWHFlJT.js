import{f as N,r as a,g as A,h as L,i as $,j as P,k as H,l as W,m as X,n as Y,p as q,q as K,s as O,v as F,x as V,y as z,c as j,o as U,a as C,P as G,_ as D,b as Q}from"./CvqwH3nN.js";function J(){const x=N(),w=W(),c=a(),m=A(),h=L(),u=x.$file,f=$(()=>u.images.value.findIndex(e=>e.pathname.split(".")[0]===h.params.slug[0])),b=$(()=>{var e,n;return((n=(e=u.images.value)==null?void 0:e[0])==null?void 0:n.pathname.split(".")[0])===h.params.slug[0]||!1}),y=$(()=>{var e,n;return((n=(e=u.images.value)==null?void 0:e[u.images.value.length-1])==null?void 0:n.pathname.split(".")[0])===h.params.slug[0]||!1}),I=e=>{P(e,{passive:!1,onSwipeEnd(n,o){var s,t;o==="left"?y.value?m.push("/"):m.push(`/detail/${(s=u.images.value[f.value+1])==null?void 0:s.pathname.split(".")[0]}`):b.value?m.push("/"):m.push(`/detail/${(t=u.images.value[f.value-1])==null?void 0:t.pathname.split(".")[0]}`)}})},g=async(e,n,o,s,t,r,i)=>{const l=document.createElement("canvas"),p=l.getContext("2d");l.width=e==null?void 0:e.naturalWidth,l.height=e==null?void 0:e.naturalHeight,p.filter=`contrast(${n}%) blur(${o}px) invert(${s}%)
      saturate(${t}%) hue-rotate(${r}deg) sepia(${i}%)`,p.drawImage(e,0,0,l.width,l.height);const d=new Image;return d.src=l.toDataURL("image/png"),c.value=d,c};return{downloadImage:async(e,n,o,s,t,r,i,l)=>{await g(n,o,s,t,r,i,l),c.value&&await H(c.value.src,{baseURL:`${w.public.imageApi}/ipx/_/tmdb/`},"$KqkYjBwe2v").then(p=>{const d=p.data.value,v=URL.createObjectURL(d),_=document.createElement("a");_.setAttribute("href",v),_.setAttribute("download",e),_.click()})},applyFilters:g,convertBase64ToFile:async(e,n)=>{var i,l;const o=e.value.currentSrc,t=await(await fetch(o)).blob();return new File([t],`${Math.random().toString().split(".")[1]}.${(l=(i=n.value)==null?void 0:i.contentType)==null?void 0:l.split("/").pop()}`,{type:n.value.contentType})},magnifierImage:(e,n,o,s,t=2)=>{s.style.filter!==o.style.filter&&(s.style.filter=o.style.filter);const r=o.getBoundingClientRect(),i=n.getBoundingClientRect(),l=e.pageX-i.left,p=e.pageY-i.top,d=r.width,v=r.height,_=d*(t===1?1.5:t),M=v*(t===1?1.5:t);let S=l/d*100,k=p/v*100;l>.01*d&&(S+=.15*S),p>=.01*v&&(k+=.15*k),s.style.backgroundSize=`${_}px ${M}px`,s.style.backgroundPositionX=`${S-9}%`,s.style.backgroundPositionY=`${k-9}%`,s.style.left=`${l-50}px`,s.style.top=`${p-50}px`,s.style.zIndex="9999"},initSwipe:I,currentIndex:f,isFirstImg:b,isLastImg:y}}const Z={class:"absolute inset-0 w-full h-full"},E=["src"],ee=X({__name:"ImageDetail",setup(x){a();const w=a();a(),a(),a(!1),a(!1);const c=a(100),m=a(0),h=a(0),u=a(0),f=a(100),b=a(0);a(!1),a(1);const y=a(["Contain","Cover","Scale-down","Fill","None"]);a(y.value[0]);const I=a(!1),{images:g,uploadImage:T}=Y();q(),K("(max-width: 1024px)");const{currentIndex:R,isFirstImg:B,isLastImg:e,initSwipe:n}=J();O("$hk2MCeb1yX");const o=L(),s=A();return $(()=>g.value.filter(t=>t.pathname.split(".")[0]===o.params.slug[0])[0]),F("Escape",()=>{s.push("/")}),F("ArrowLeft",()=>{var t;B.value?s.push("/"):s.push(`/detail/${(t=g.value[R.value-1])==null?void 0:t.pathname.split(".")[0]}`)}),F("ArrowRight",()=>{var t;e.value?s.push("/"):s.push(`/detail/${(t=g.value[R.value+1])==null?void 0:t.pathname.split(".")[0]}`)}),V([c,m,u,f,h,b],()=>{I.value=!0}),z(()=>{n(w)}),(t,r)=>(U(),j("div",null,[C("div",Z,[C("img",{src:`${(t._.provides[G]||t.$route).params.slug}`,class:"object-contain w-full h-full blur-[70px] brightness-[.2] will-change-[filter]",alt:""},null,8,E)])]))}}),te=Object.assign(D(ee,[["__scopeId","data-v-0485107a"]]),{__name:"ImageDetail"}),se={};function ae(x,w){const c=te;return U(),j("div",null,[Q(c)])}const le=D(se,[["render",ae]]);export{le as default};
